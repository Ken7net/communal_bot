# üè† –ë–æ—Ç –¥–ª—è —É—á—ë—Ç–∞ –∫–æ–º–º—É–Ω–∞–ª—å–Ω—ã—Ö –ø–ª–∞—Ç–µ–∂–µ–π

**Telegram-–±–æ—Ç –¥–ª—è —Ä–∞—Å—á—ë—Ç–∞ –∏ —É—á—ë—Ç–∞ –∫–æ–º–º—É–Ω–∞–ª—å–Ω—ã—Ö –ø–ª–∞—Ç–µ–∂–µ–π –≤ –≥—Ä—É–ø–ø–µ –∂–∏–ª—å—Ü–æ–≤.**  
–ü–æ–ª–Ω–æ—Å—Ç—å—é —Ä–∞–±–æ—Ç–∞–µ—Ç —á–µ—Ä–µ–∑ Telegram. –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –Ω–µ—Å–∫–æ–ª—å–∫–æ —É—Å–ª—É–≥, —Ç–∞—Ä–∏—Ñ—ã, –≤–≤–æ–¥ –ø–æ–∫–∞–∑–∞–Ω–∏–π, –æ–ø–ª–∞—Ç—É, –±–∞–ª–∞–Ω—Å –∏ **–ø–æ–ª–Ω—ã–π
–∫–æ–Ω—Ç—Ä–æ–ª—å –¥–ª—è –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞**.

---

## ‚ú® –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

### –î–ª—è —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤:

- üì• –í–≤–æ–¥ –ø–æ–∫–∞–∑–∞–Ω–∏–π —Å—á—ë—Ç—á–∏–∫–æ–≤
- üí∞ –§–∏–∫—Å–∞—Ü–∏—è –æ–ø–ª–∞—Ç
- üìä –ü—Ä–æ–≤–µ—Ä–∫–∞ –ª–∏—á–Ω–æ–≥–æ –±–∞–ª–∞–Ω—Å–∞

### –î–ª—è –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞:

- ‚ûï –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —É—Å–ª—É–≥–∞–º–∏ –∏ —Ç–∞—Ä–∏—Ñ–∞–º–∏
- üëÅÔ∏è –ü—Ä–æ—Å–º–æ—Ç—Ä –≤—Å–µ—Ö –¥–∞–Ω–Ω—ã—Ö –≤—Å–µ—Ö —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤
- üñäÔ∏è –í–≤–æ–¥ –ø–æ–∫–∞–∑–∞–Ω–∏–π –∏ –æ–ø–ª–∞—Ç **–æ—Ç –∏–º–µ–Ω–∏ –ª—é–±–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è**
- üìã –ü–æ–ª–Ω–∞—è –ø—Ä–æ–∑—Ä–∞—á–Ω–æ—Å—Ç—å: –±–∞–ª–∞–Ω—Å—ã, –Ω–∞—á–∏—Å–ª–µ–Ω–∏—è, –ø–ª–∞—Ç–µ–∂–∏

---

## üß© –¢–µ—Ö–Ω–æ–ª–æ–≥–∏–∏

- **Python 3.11+**
- **Django 5.x** (—Ç–æ–ª—å–∫–æ ORM –∏ –º–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏—è)
- **python-telegram-bot** (–∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–π webhook)
- **PostgreSQL** (–¥–∞–Ω–Ω—ã–µ + —Å–æ—Å—Ç–æ—è–Ω–∏—è FSM)
- **Render.com** (—Ö–æ—Å—Ç–∏–Ω–≥ –∏ –ë–î, free tier)

---
## üß© –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞
- –ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å: —Ç–æ–ª—å–∫–æ Telegram (–±–æ—Ç)
- –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö: PostgreSQL (–≤—Å–µ –¥–∞–Ω–Ω—ã–µ + —Å–æ—Å—Ç–æ—è–Ω–∏—è –¥–∏–∞–ª–æ–≥–æ–≤)
- –•–æ—Å—Ç–∏–Ω–≥: Render.com (free tier)
- –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏: –±–µ–∑ Redis, –±–µ–∑ —Ñ–æ–Ω–æ–≤—ã—Ö –∑–∞–¥–∞—á
- –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å: –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è –ø–æ Telegram ID, –ø—Ä–∞–≤–∞ –∞–¥–º–∏–Ω–∞ —á–µ—Ä–µ–∑ –±–µ–ª—ã–π —Å–ø–∏—Å–æ–∫

---

## üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç (–¥–ª—è –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞)
- –ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–π—Ç–µ –±–æ—Ç–∞ –≤ @BotFather ‚Üí –ø–æ–ª—É—á–∏—Ç–µ TELEGRAM_BOT_TOKEN.
- –†–∞–∑–≤–µ—Ä–Ω–∏—Ç–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –Ω–∞ Render.com (—Å–º. —Ä–∞–∑–¥–µ–ª ¬´–†–∞–∑–≤—ë—Ä—Ç—ã–≤–∞–Ω–∏–µ¬ª).
- –£–∫–∞–∂–∏—Ç–µ —Å–≤–æ–π Telegram ID –≤ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞—Ö –∫–∞–∫ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞.
- –í –ª–∏—á–Ω—ã—Ö —Å–æ–æ–±—â–µ–Ω–∏—è—Ö —Å –±–æ—Ç–æ–º –≤—ã–ø–æ–ª–Ω–∏—Ç–µ:

/add_utility        ‚Äî –¥–æ–±–∞–≤–∏—Ç—å —É—Å–ª—É–≥—É (–Ω–∞–ø—Ä–∏–º–µ—Ä, ¬´–≠–ª–µ–∫—Ç—Ä–∏—á–µ—Å—Ç–≤–æ¬ª)
/set_tariff         ‚Äî –Ω–∞–∑–Ω–∞—á–∏—Ç—å —Ç–∞—Ä–∏—Ñ (–Ω–∞–ø—Ä–∏–º–µ—Ä, 7.50 —Ä—É–±./–∫–í—Ç¬∑—á)
/list_utilities     ‚Äî –ø–æ—Å–º–æ—Ç—Ä–µ—Ç—å —Å–ø–∏—Å–æ–∫ —É—Å–ª—É–≥
/list_tariffs       ‚Äî –ø–æ—Å–º–æ—Ç—Ä–µ—Ç—å —Ç–µ–∫—É—â–∏–µ —Ç–∞—Ä–∏—Ñ—ã

–ü—Ä–∏–≥–ª–∞—Å–∏—Ç–µ —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤ ‚Äî –ø—Ä–∏ –ø–µ—Ä–≤–æ–º —Å–æ–æ–±—â–µ–Ω–∏–∏ –æ–Ω–∏ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä—É—é—Ç—Å—è.

---

## üì≤ –ö–æ–º–∞–Ω–¥—ã —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤
–ö–æ–º–∞–Ω–¥–∞		–î–µ–π—Å—Ç–≤–∏–µ
/submit_reading	–í–≤–µ—Å—Ç–∏ –ø–æ–∫–∞–∑–∞–Ω–∏—è —Å—á—ë—Ç—á–∏–∫–∞
/add_payment	–ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å –æ–ø–ª–∞—Ç—É
/balance	–£–∑–Ω–∞—Ç—å —Ç–µ–∫—É—â–∏–π –±–∞–ª–∞–Ω—Å
üí° –ë–æ—Ç –∏—Å–ø–æ–ª—å–∑—É–µ—Ç inline-–∫–Ω–æ–ø–∫–∏ –∏ —á—ë—Ç–∫–∏–µ –ø–æ–¥—Å–∫–∞–∑–∫–∏ ‚Äî –æ—à–∏–±–∏—Ç—å—Å—è —Å–ª–æ–∂–Ω–æ.

---

## üëÆ –ö–æ–º–∞–Ω–¥—ã –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞
–ö–æ–º–∞–Ω–¥–∞		–î–µ–π—Å—Ç–≤–∏–µ
/add_utility    –¥–æ–±–∞–≤–∏—Ç—å —É—Å–ª—É–≥—É (–Ω–∞–ø—Ä–∏–º–µ—Ä, ¬´–≠–ª–µ–∫—Ç—Ä–∏—á–µ—Å—Ç–≤–æ¬ª)
/delete_utility	–£–¥–∞–ª–∏—Ç—å —É—Å–ª—É–≥—É (—Ç–æ–ª—å–∫–æ –µ—Å–ª–∏ –Ω–µ—Ç –¥–∞–Ω–Ω—ã—Ö)
/set_tariff     –Ω–∞–∑–Ω–∞—á–∏—Ç—å —Ç–∞—Ä–∏—Ñ (–Ω–∞–ø—Ä–∏–º–µ—Ä, 7.50 —Ä—É–±./–∫–í—Ç¬∑—á)
/delete_tariff	–£–¥–∞–ª–∏—Ç—å –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–π —Ç–∞—Ä–∏—Ñ
/list_utilities –ø–æ—Å–º–æ—Ç—Ä–µ—Ç—å —Å–ø–∏—Å–æ–∫ —É—Å–ª—É–≥
/list_tariffs   –ø–æ—Å–º–æ—Ç—Ä–µ—Ç—å —Ç–µ–∫—É—â–∏–µ —Ç–∞—Ä–∏—Ñ—ã
üîí –≠—Ç–∏ –∫–æ–º–∞–Ω–¥—ã –Ω–µ–¥–æ—Å—Ç—É–ø–Ω—ã –æ–±—ã—á–Ω—ã–º —É—á–∞—Å—Ç–Ω–∏–∫–∞–º.

---

## üóÉÔ∏è –ö–∞–∫ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç?
1.–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤–≤–æ–¥–∏—Ç –ø–æ–∫–∞–∑–∞–Ω–∏—è ‚Üí –±–æ—Ç –Ω–∞—Ö–æ–¥–∏—Ç –ø—Ä–µ–¥—ã–¥—É—â–∏–µ ‚Üí —Ä–∞—Å—Å—á–∏—Ç—ã–≤–∞–µ—Ç –ø–æ—Ç—Ä–µ–±–ª–µ–Ω–∏–µ.
2.–°–∏—Å—Ç–µ–º–∞ –ø—Ä–∏–º–µ–Ω—è–µ—Ç –∞–∫—Ç—É–∞–ª—å–Ω—ã–π —Ç–∞—Ä–∏—Ñ ‚Üí —Å–æ–∑–¥–∞—ë—Ç –Ω–∞—á–∏—Å–ª–µ–Ω–∏–µ.
3.–ü–ª–∞—Ç—ë–∂ —Ñ–∏–∫—Å–∏—Ä—É–µ—Ç—Å—è –æ—Ç–¥–µ–ª—å–Ω–æ.
4.–ë–∞–ª–∞–Ω—Å = —Å—É–º–º–∞ –ø–ª–∞—Ç–µ–∂–µ–π ‚àí —Å—É–º–º–∞ –Ω–∞—á–∏—Å–ª–µ–Ω–∏–π ‚Üí –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è –ø–æ –∑–∞–ø—Ä–æ—Å—É.
–í—Å–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ –∏–¥–µ–º–ø–æ—Ç–µ–Ω—Ç–Ω—ã: –ø–æ–≤—Ç–æ—Ä–Ω–∞—è –æ—Ç–ø—Ä–∞–≤–∫–∞ –Ω–µ –ø—Ä–∏–≤–µ–¥—ë—Ç –∫ –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏—é.

---

## üõ† –†–∞–∑–≤—ë—Ä—Ç—ã–≤–∞–Ω–∏–µ –Ω–∞ Render.com
–¢—Ä–µ–±–æ–≤–∞–Ω–∏—è
–ê–∫–∫–∞—É–Ω—Ç Render
Telegram-–±–æ—Ç, —Å–æ–∑–¥–∞–Ω–Ω—ã–π —á–µ—Ä–µ–∑ @BotFather
–®–∞–≥–∏
1.–°–æ–∑–¥–∞–π—Ç–µ –Ω–æ–≤—ã–π Web Service –≤ Render.
2.–ü–æ–¥–∫–ª—é—á–∏—Ç–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π —Å —ç—Ç–∏–º –∫–æ–¥–æ–º.
3.–í –Ω–∞—Å—Ç—Ä–æ–π–∫–∞—Ö —É–∫–∞–∂–∏—Ç–µ:
	- Build Command: pip install -r requirements.txt
	- Start Command: python manage.py migrate && python manage.py runserver 0.0.0.0:$PORT
4.–î–æ–±–∞–≤—å—Ç–µ PostgreSQL (Render –ø—Ä–µ–¥–ª–æ–∂–∏—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏).
5.–£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è:
–ü–µ—Ä–µ–º–µ–Ω–Ω–∞—è 		–ü—Ä–∏–º–µ—Ä –∑–Ω–∞—á–µ–Ω–∏—è
TELEGRAM_BOT_TOKEN	123456789:ABCdefGhIJKlmNoPQRsTUVwxyZ
ADMIN_TELEGRAM_IDS	123456789 (–≤–∞—à Telegram ID)
SECRET_KEY		–õ—é–±–æ–π –¥–ª–∏–Ω–Ω—ã–π —Å–µ–∫—Ä–µ—Ç (–Ω–∞–ø—Ä–∏–º–µ—Ä, —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–π)
6.–ù–∞–∂–º–∏—Ç–µ Deploy.
üí° –ü–æ—Å–ª–µ –¥–µ–ø–ª–æ—è Render –ø–æ–∫–∞–∂–µ—Ç URL –≤–∏–¥–∞ https://your-bot.onrender.com.
–ë–æ—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –Ω–∞—Å—Ç—Ä–æ–∏—Ç webhook –ø—Ä–∏ –∑–∞–ø—É—Å–∫–µ.

---

## üîê –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å
- –ù–µ—Ç –ø–∞—Ä–æ–ª–µ–π ‚Äî –≤—Ö–æ–¥ –ø–æ Telegram ID.
- –ê–¥–º–∏–Ω—Å–∫–∏–µ –ø—Ä–∞–≤–∞ ‚Äî —Ç–æ–ª—å–∫–æ –ø–æ –±–µ–ª–æ–º—É —Å–ø–∏—Å–∫—É (ADMIN_TELEGRAM_IDS).
- –í—Å–µ –¥–∞–Ω–Ω—ã–µ —Ö—Ä–∞–Ω—è—Ç—Å—è –≤ –∑–∞—â–∏—â—ë–Ω–Ω–æ–π PostgreSQL-–±–∞–∑–µ Render.
- –í–µ–±—Ö—É–∫ –¥–æ—Å—Ç—É–ø–µ–Ω —Ç–æ–ª—å–∫–æ Telegram (–ø—Ä–æ–≤–µ—Ä–∫–∞ –Ω–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞, –Ω–æ Render –∏–∑–æ–ª–∏—Ä—É–µ—Ç —Å–µ—Ä–≤–∏—Å).
- –í—Å–µ –∫–æ–º–∞–Ω–¥—ã –ø—Ä–æ–≤–µ—Ä—è—é—Ç is_admin.
- –ê–¥–º–∏–Ω –Ω–µ –º–æ–∂–µ—Ç –≤—ã–±—Ä–∞—Ç—å —Å–µ–±—è –ø—Ä–∏ –≤–≤–æ–¥–µ –æ—Ç –∏–º–µ–Ω–∏ (—Ñ–∏–ª—å—Ç—Ä exclude(telegram_id=...)).
- –ù–µ—Ç –ø—Ä—è–º–æ–≥–æ SQL ‚Äî –≤—Å—ë —á–µ—Ä–µ–∑ ORM Django.

---

## üì¶ –¢–µ—Ö–Ω–æ–ª–æ–≥–∏–∏
- Python 3.11+
- Django 5.x (—Ç–æ–ª—å–∫–æ ORM –∏ –º–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏—è)
- python-telegram-bot (–∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–π —Ä–µ–∂–∏–º)
- PostgreSQL (–µ–¥–∏–Ω–æ–µ —Ö—Ä–∞–Ω–∏–ª–∏—â–µ: –¥–∞–Ω–Ω—ã–µ + FSM)
- Render.com (—Ö–æ—Å—Ç–∏–Ω–≥ –∏ –ë–î)

---

## üìù –õ–∏—Ü–µ–Ω–∑–∏—è
MIT ‚Äî –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –∏ –º–æ–¥–∏—Ñ–∏—Ü–∏—Ä—É–π—Ç–µ —Å–≤–æ–±–æ–¥–Ω–æ.

---

## üí° –ü—Ä–∏–º–µ—Ä –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è
–ê–¥–º–∏–Ω:
/admin_submit_reading
‚Üí –≤—ã–±–∏—Ä–∞–µ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è 123456789
‚Üí –≤—ã–±–∏—Ä–∞–µ—Ç ¬´–≠–ª–µ–∫—Ç—Ä–∏—á–µ—Å—Ç–≤–æ¬ª
‚Üí –≤–≤–æ–¥–∏—Ç 1500.5

–ë–æ—Ç:
‚úÖ –ü–æ–∫–∞–∑–∞–Ω–∏—è –∑–∞ 123456789 –ø—Ä–∏–Ω—è—Ç—ã. –ù–∞—á–∏—Å–ª–µ–Ω–∏–µ: 37.50 —Ä—É–±.

–ê–¥–º–∏–Ω:
/user_balance 123456789

–ë–æ—Ç:
üìä –ë–∞–ª–∞–Ω—Å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è 123456789:

–ù–∞—á–∏—Å–ª–µ–Ω–∏—è:
  ‚Ä¢ –≠–ª–µ–∫—Ç—Ä–∏—á–µ—Å—Ç–≤–æ: 37.50 —Ä—É–±. (2025-11-27)

–û–ø–ª–∞—Ç—ã:
  ‚Ä¢ 100.00 —Ä—É–±. (2025-11-26 10:30)

–ò—Ç–æ–≥–æ: +62.50 —Ä—É–±.

---

## üöÄ –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∏ —Ä–∞–∑–≤—ë—Ä—Ç—ã–≤–∞–Ω–∏–µ

### 1. –õ–æ–∫–∞–ª—å–Ω–∞—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∞

```bash
git clone <repo>
cd communal_bot
python -m venv venv
source venv/bin/activate  # Linux/macOS
# –∏–ª–∏ venv\Scripts\activate  # Windows

pip install -r requirements.txt
cp .env.example .env
# –û—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä—É–π—Ç–µ .env
python manage.py migrate
python manage.py runserver

---

